<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>demo</title>
    <link type="text/css" rel="stylesheet" href="../resources/font-awesome-4.7.0/css/font-awesome.min.css">
    <style>
        body {
            background: #f8f8f8;
        }

        .main-wrapper {
            margin: 0 auto;
            width: 425px;
            height: 425px;
        }

        .main-wrapper * {
            box-sizing: border-box;
        }

        .tictactoe {
            padding: 20px;
            height: 100%;
            border-radius: 15px;
            background: #56BAAC;
            overflow: hidden;
        }

        .tictactoe .list {
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .tictactoe .list .line {
            display: flex;
            flex: 1;
        }

        .tictactoe .list .item {
            display: flex;
            flex: 1;
            border: 6px solid #489E8E;
            justify-content: center;
            align-items: center;
        }

        #line1 .item {
            border-top: none;
        }

        #line3 .item {
            border-bottom: none;
        }

        .tictactoe .list .item:first-child {
            border-left: none;
        }

        .tictactoe .list .item:last-child {
            border-right: none;
        }

        .tictactoe .icon {
            display: none;
            font-size: 98px;
        }

        .tictactoe .icon.fa-circle-o {
            color: #F1EBD6;
        }

        .tictactoe .icon.fa-close {
            color: #545454;
        }

        .select-person {
            margin-top: 15px;
            height: 40px;
            font-size: 0;
        }

        .select-person .item {
            position: relative;
            display: inline-block;
            padding: 0 12px;
            width: 49%;
            height: 100%;
            line-height: 40px;
            text-align: right;
            border-radius: 2px;
            border-bottom: 2px solid transparent;
            font-size: 24px;
            color: rgba(0, 0, 0, .54);
            background: #fff;
            box-shadow: 0 1px 1px rgba(0, 0, 0, .16);
            cursor: pointer;
        }

        .select-person .item.active {
            border-bottom-color: #56BAAC;
        }

        #selectClose {
            margin-right: 2%;
        }

        .select-person .icon {
            position: absolute;
            top: 10px;
            left: 12px;
            font-size: 20px;
            color: #000;
        }

        .game-info {
            text-align: center;
            color: rgba(0, 0, 0, 0.16)
        }

        .restart-game {
            margin-top: 15px;
            padding: 10px 0;
            text-align: center;
            cursor: pointer;
            border-radius: 3px;
            border: 1px solid #14bdac;
            color: #14bdac;
            transition: all .3s;
        }

        .restart-game:hover {
            background: #14bdac;
            color: #fff;
        }
    </style>
</head>
<body>
<div class="main-wrapper">
    <div class="select-person">
        <div class="item active" id="selectClose">
            <i class="icon fa fa-close"></i>
            <span class="count">0</span>
        </div>
        <div class="item" id="selectCircle">
            <i class="icon fa fa-circle-o"></i>
            <span class="count">0</span>
        </div>
    </div>
    <div class="game-info">
        <p>开始游戏或选择玩家</p>
    </div>
    <div class="tictactoe">
        <div class="list">
            <div class="line" id="line1">
                <div class="item">
                    <i class="icon fa fa-circle-o"></i>
                    <i class="icon fa fa-close"></i>
                </div>
                <div class="item">
                    <i class="icon fa fa-circle-o"></i>
                    <i class="icon fa fa-close"></i>
                </div>
                <div class="item">
                    <i class="icon fa fa-circle-o"></i>
                    <i class="icon fa fa-close"></i>
                </div>
            </div>
            <div class="line" id="line2">
                <div class="item">
                    <i class="icon fa fa-circle-o"></i>
                    <i class="icon fa fa-close"></i>
                </div>
                <div class="item">
                    <i class="icon fa fa-circle-o"></i>
                    <i class="icon fa fa-close"></i>
                </div>
                <div class="item">
                    <i class="icon fa fa-circle-o"></i>
                    <i class="icon fa fa-close"></i>
                </div>
            </div>
            <div class="line" id="line3">
                <div class="item">
                    <i class="icon fa fa-circle-o"></i>
                    <i class="icon fa fa-close"></i>
                </div>
                <div class="item">
                    <i class="icon fa fa-circle-o"></i>
                    <i class="icon fa fa-close"></i>
                </div>
                <div class="item">
                    <i class="icon fa fa-circle-o"></i>
                    <i class="icon fa fa-close"></i>
                </div>
            </div>
        </div>
    </div>
    <div class="restart-game">
        <span>重新开始游戏</span>
    </div>
</div>
</body>
<script src="../resources/jquery-3.2.1.min.js"></script>
<script>

    // 开始游戏或选择玩家状态
    const CHOOSE_ROLE = 1;
    // 电脑下棋
    const COMPANY_TIME = 2;
    // 玩家下棋
    const GAMER_TIME = 3;

    // 当前角色为O
    const ROLE_CIRCLE = 4;
    // 当前角色为X
    const ROLE_CLOSE = 5;

    const game = {

        status: 0,
        currentRole: 0,

        $allIcon: $(".tictactoe .icon"),
        $selectClose: $("#selectClose"),
        $selectCircle: $("#selectCircle"),
        $restartGame: $(".restart-game"),
        $item: $(".tictactoe .item"),

        // 游戏初始化
        init: function() {
            game.status = CHOOSE_ROLE;
            game.currentRole = ROLE_CLOSE;

            game.changeRole(ROLE_CLOSE);
            game.clearAllIcon();
            game.bindClickListener();
        },
        // 显示图标
        displayIcon: function ($item, role) {
            if (role === ROLE_CIRCLE) {
                $item.children(".fa-circle-o").show();
            } else {
                $item.children(".fa-close").show();
            }
        },
        // 清空棋盘
        clearAllIcon: function () {
            game.$allIcon.each(function () {
                $(this).hide();
            });
        },
        // 绑定点击事件
        bindClickListener: function () {
            // 选择O
            game.$selectCircle.on("click", game.selectCircle);

            // 点击棋盘
            game.$item.on("click", game.clickItem);

            // 点击重新开始按钮
            game.$restartGame.on("click", function () {
                game.init();
            })

        },
        selectCircle: function () {
            if (game.status !== CHOOSE_ROLE) {
                return;
            }
            game.currentRole = ROLE_CIRCLE;
            game.changeRole(ROLE_CIRCLE);
            game.status = COMPANY_TIME;
            // TODO 电脑开始下棋
        },
        changeRole: function (nextRole) {
            if (nextRole === ROLE_CLOSE) {
                game.$selectCircle.removeClass("active");
                game.$selectClose.addClass("active");
            } else {
                game.$selectClose.removeClass("active");
                game.$selectCircle.addClass("active");
            }
        },
        clickItem: function () {
            // 如果状态不对,返回
            if (game.status !== GAMER_TIME) {
                return;
            }
            // 判断该点是否能落子
            // TODO

            // 显示对应的棋子
            game.displayIcon($(this), game.currentRole);

            // TODO 判断是否胜利

            // 改变状态为电脑下棋状态

            // TODO 电脑开始下棋

        },
        // 电脑下棋
        companyPlay: function() {

        },
        // 判断是否胜利
        isWin: function () {

        }
    };
    game.init();
</script>
</html>